/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/Element","sap/ui/core/Control","sap/m/Popover","sap/ui/core/delegate/ItemNavigation","sap/ui/core/InvisibleText","./NavigationListRenderer","sap/base/Log"],function(jQuery,t,e,i,o,s,a,n,r){"use strict";var p=i.extend("sap.tnt.NavigationList",{metadata:{library:"sap.tnt",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension"},expanded:{type:"boolean",group:"Misc",defaultValue:true},selectedKey:{type:"string",group:"Data"}},defaultAggregation:"items",aggregations:{items:{type:"sap.tnt.NavigationListItem",multiple:true,singularName:"item"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},selectedItem:{type:"sap.tnt.NavigationListItem",multiple:false}},events:{itemSelect:{parameters:{item:{type:"sap.ui.core.Item"}}}}},renderer:n});p.prototype.init=function(){this._itemNavigation=new s;this._itemNavigation.setCycling(false);this.addEventDelegate(this._itemNavigation);this._itemNavigation.setPageSize(10);this._itemNavigation.setDisabledModifiers({sapnext:["alt","meta"],sapprevious:["alt","meta"]})};p.prototype.onBeforeRendering=function(){var t=this.getSelectedKey();this.setSelectedKey(t)};p.prototype.onAfterRendering=function(){this._itemNavigation.setRootDomRef(this.getDomRef());this._itemNavigation.setItemDomRefs(this._getDomRefs())};p.prototype._updateNavItems=function(){this._itemNavigation.setItemDomRefs(this._getDomRefs())};p.prototype._getDomRefs=function(){var t=[],e=this.getItems(),i=this.getExpanded();for(var o=0;o<e.length;o++){if(i){jQuery.merge(t,e[o]._getDomRefs())}else{t.push(e[o].getDomRef())}}return t};p.prototype._adaptPopoverPositionParams=function(){if(this.getShowArrow()){this._marginLeft=10;this._marginRight=10;this._marginBottom=10;this._arrowOffset=8;this._offsets=["0 -8","8 0","0 8","-8 0"];this._myPositions=["center bottom","begin top","center top","end top"];this._atPositions=["center top","end top","center bottom","begin top"]}else{this._marginTop=0;this._marginLeft=0;this._marginRight=0;this._marginBottom=0;this._arrowOffset=0;this._offsets=["0 0","0 0","0 0","0 0"];this._myPositions=["begin bottom","begin top","begin top","end top"];this._atPositions=["begin top","end top","begin bottom","begin top"]}};p.prototype.exit=function(){if(this._itemNavigation){this._itemNavigation.destroy()}if(this._popover){this._popover.destroy()}};p.prototype._selectItem=function(t){this.fireItemSelect(t);var e=t.item;this.setSelectedItem(e,true)};p.prototype._findItemByKey=function(t){var e=this.getItems(),i,o,s,a,n;for(a=0;a<e.length;a++){i=e[a];if(i._getUniqueKey()===t){return i}o=i.getItems();for(n=0;n<o.length;n++){s=o[n];if(s._getUniqueKey()===t){return s}}}return null};p.prototype.setSelectedKey=function(t){var e=this._findItemByKey(t);this.setSelectedItem(e,true);this.setProperty("selectedKey",t,true);return this};p.prototype.getSelectedItem=function(){var t=this.getAssociation("selectedItem");if(!t){return null}return sap.ui.getCore().byId(t)};p.prototype.setSelectedItem=function(t){var i,o,s;if(this._selectedItem){this._selectedItem._unselect()}if(!t){this._selectedItem=null}s=t instanceof e&&t.isA("sap.tnt.NavigationListItem");if(typeof t!=="string"&&!s){r.warning("Type of selectedItem association should be string or instance of sap.tnt.NavigationListItem. New value was not set.");this.setAssociation("selectedItem",null,true);return this}this.setAssociation("selectedItem",t,true);if(typeof t==="string"){i=sap.ui.getCore().byId(t)}else{i=t}o=i?i._getUniqueKey():"";this.setProperty("selectedKey",o,true);if(i){i._select();this._selectedItem=i;return this}r.warning("Type of selectedItem association should be a valid NavigationListItem object or ID. New value was not set.");return this};p.prototype._openPopover=function(t,e){var i=this;var s=e.getSelectedItem();if(s&&e.isGroupSelected){s=null}var n=this._popover=new o({showHeader:false,horizontalScrolling:false,verticalScrolling:true,initialFocus:s,afterClose:function(){if(i._popover){i._popover.destroy();i._popover=null}},content:e,ariaLabelledBy:a.getStaticId("sap.tnt","NAVIGATION_LIST_DIALOG_TITLE")}).addStyleClass("sapContrast sapContrastPlus");n._adaptPositionParams=this._adaptPopoverPositionParams;n.openBy(t)};p.prototype._closePopover=function(){if(this._popover){this._popover.close()}};return p});
//# sourceMappingURL=NavigationList.js.map