{"version":3,"file":"ThemeManager.js","names":["sap","ui","define","assert","Eventing","future","Log","Localization","each","LoaderExtensions","Device","VersionInfo","Library","Theming","ThemeHelper","includeStylesheet","oEventing","maxThemeCheckCycles","mAllLoadedLibraries","CUSTOMCSSCHECK","_CUSTOMID","_THEME_PREFIX","sDerivedDistVersionFromPreload","bAllPreloadedCssReady","document","querySelectorAll","forEach","linkNode","bPreloadedCssReady","sLibId","getAttribute","replace","match","version","removeAttribute","info","href","undefined","sheet","cssRules","addEventListener","oEvent","bError","type","setAttribute","length","e","url","id","_iCount","_customCSSAdded","_themeCheckedForCustom","_sFallbackTheme","_mThemeFallback","_sThemeCheckId","ThemeManager","themeLoaded","checkThemeApplied","reset","delayedCheckTheme","fireThemeApplied","clearTimeout","_includeLibraryThemeAndEnsureThemeRoot","oLibThemingInfo","sLibName","name","_ensureThemeRoot","getTheme","sLinkId","variant","preloadedCss","includeLibraryTheme","sVariant","vQueryOrLibInfo","sQuery","getLibraryCssQueryParams","sRtl","getRTL","sLibFileName","indexOf","substring","querySelector","sCssBasePath","URL","_getThemePath","baseURI","toString","oTmpLink","createElement","sCssPathAndName","fnAddFoucmarker","Parameters","require","_addLibraryTheme","sThemeName","toUrl","_updateThemeUrls","bSuppressFOUC","oQueryResult","Array","prototype","call","oHTMLElement","updateThemeUrl","_attachThemeApplied","fnCallback","attachEvent","_detachThemeApplied","detachEvent","ThemeParameters","_reset","fireEvent","theme","checkTheme","sPath","bIsStandardTheme","isStandardTheme","res","aFailedLibs","checkLib","lib","currentRes","checkAndRemoveStyle","prefix","checkCustom","sCustomCssPath","sLibCssQueryParams","debug","oCustomCssLink","remove","oStyle","getElementById","hasSheetCssRules","push","sLib","oThemeMetaData","getMetadata","Extends","sThemeRoot","getThemeRoot","rBaseTheme","exec","validateAndFallbackTheme","warning","cssFile","window","style","getComputedStyle","content","getPropertyValue","browser","safari","html","documentElement","classList","add","errorThrows","cause","aRules","safeAccessSheetCssRules","i","test","selectorText","bFirst","bEmergencyExit","iDelay","setTimeout","oLink","dataset","sapUiFoucmarker","applyTheme","oTheme","sTheme","new","old","slice","registerResourcePath","iQueryIndex","search","sStandardLibFilePrefix","sRTL","sHref","pos","mLinkId","RegExp","isArray","lastIndexOf","oLibInfo","_content","attachChange","mThemeRoots","themeRoots","forceUpdate","registerThemeManager"],"sources":["ThemeManager-dbg.js"],"mappings":"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","ignoreList":[]}