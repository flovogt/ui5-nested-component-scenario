/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/library","sap/ui/core/Core","sap/ui/core/theming/Parameters","sap/m/IllustratedMessage","sap/m/Button"],function(e,t,a,r,n){"use strict";var i={};var o="";var u=parseFloat(e.BaseFontSize);var s=null;var l=null;i.measureText=function(){var e=.05;var r=document.createElement("canvas").getContext("2d");var n=function(){o=[parseFloat(a.get({name:"sapMFontMediumSize"})||"0.875rem")*u+"px",a.get({name:"sapUiFontFamily"})||"Arial"].join(" ");return o};t.attachThemeChanged(n);return function(t,a){r.font=a||o||n();return r.measureText(t||"").width/u+e}}();i.calcTypeWidth=function(){var e=0;var a=[2023,9,26,22,47,58,999];var r=new Date(Date.UTC.apply(0,a));var n=new(Function.prototype.bind.apply(Date,[null].concat(a)));var o={Byte:3,SByte:3,Int16:5,Int32:9,Int64:12,Single:6,Float:12,Double:13,Decimal:15,Integer:9};t.attachThemeChanged(function(){e=0});return function(a,u){var s=a.getMetadata().getName().split(".").pop();var l=u&&u.maxWidth||19;var m=u&&u.gap||0;var c=function(e){return Math.min(e+m,l)};if(s=="Boolean"){if(!e){var p=t.getLibraryResourceBundle("sap.ui.core");var d=i.measureText(p.getText("YES"));var v=i.measureText(p.getText("NO"));e=Math.max(d,v)}return c(e)}if(s=="String"||a.isA("sap.ui.model.odata.type.String")){var f=parseInt(a.getConstraints().maxLength)||0;if(!f||f*.25>l){return l}var g=i.measureText("A".repeat(f));if(f<l||l<10){return c(g)}var h=Math.log(g-l*.16)/Math.log(l/3)*(l/2)*Math.pow(l/19,1/g);return c(Math.min(h,g))}if(s.startsWith("Date")||s.startsWith("Time")){var T=a.getFormatOptions();var x=T.UTC?r:n;var M=x.toLocaleDateString();if(s=="TimeOfDay"){M=new Intl.DateTimeFormat("de",{hour:"numeric",minute:"numeric",second:"numeric"}).format(x);M=a.formatValue(M,"string")}else if(a.isA("sap.ui.model.odata.type.Time")){M=a.formatValue({__edmType:"Edm.Time",ms:r.valueOf()},"string")}else{M=a.formatValue(T.interval?[x,new Date(x*1.009)]:x,"string");(a.oFormat&&a.oFormat.oFormatOptions&&a.oFormat.oFormatOptions.pattern||"").replace(/[MELVec]{3,4}/,function(e){M+=e.length==4?"---":"-"})}return c(i.measureText(M))}if(o[s]){var C=parseInt(a.getConstraints().scale)||0;var y=parseInt(a.getConstraints().precision)||20;y=Math.min(y,o[s]);var L=2*Math.pow(10,y-C-1);L=a.formatValue(L,"string");return c(i.measureText(L))}return u&&u.defaultWidth||8}}();i.calcHeaderWidth=function(){var e="";var r="";var n=function(){if(!e){e=[a.get({name:"sapUiColumnHeaderFontWeight"})||"normal",o].join(" ")}return e};var u=function(){if(!r){r=[a.get({name:"sapMFontLargeSize"})||"normal",o].join(" ")}return r};t.attachThemeChanged(function(){e="";r=""});return function(e,t,a,r,o){var s=e.length;var l=0;a=a||19;r=r||2;if(t>a){return a}if(r>s){return r}if(o){l=.125+i.measureText("*",u())}if(!t){var m=i.measureText(e,n());return m+l}t=Math.max(t,r);if(t>s){return t}var c=i.measureText(e,n());c=Math.min(c,a*.7);var p=Math.max(1,1-Math.log(Math.max(t-1.7,.2))/Math.log(a*.5)+1);var d=p*t;var v=Math.max(0,c-d);var m=v<.15?c:d+v*(1-1/t)/Math.E;return m+l}}();i.calcColumnWidth=function(e,t,a){if(!Array.isArray(e)){e=[e]}a=Object.assign({minWidth:2,maxWidth:19,defaultWidth:8,truncateLabel:true,padding:1.0625,gap:0},a);var r=0;var n=Math.max(1,a.minWidth);var o=Math.max(n,a.maxWidth);var s=a.treeColumn?3:0;var l=a.gap+s+e.reduce(function(e,t){var r=t,n={defaultWidth:a.defaultWidth,maxWidth:a.maxWidth};if(Array.isArray(t)){r=t[0];n=t[1]||n}var o=i.calcTypeWidth(r,n);return a.verticalArrangement?Math.max(e,o):e+o+(e&&.5)},0);if(t){r=i.calcHeaderWidth(t,a.truncateLabel?l:0,o,n,a.required);r+=a.headerGap?(8+14)/u:0}l=Math.max(n,l,r);l=Math.min(l,o);l=Math.ceil(l*100)/100;return l+a.padding+"rem"};i.getNoColumnsIllustratedMessage=function(a){var i=t.getLibraryResourceBundle("sap.m");var o=new r({illustrationType:e.IllustratedMessageType.AddColumn,title:i.getText("TABLE_NO_COLUMNS_TITLE"),description:i.getText("TABLE_NO_COLUMNS_DESCRIPTION")});if(a){var u=new n({icon:"sap-icon://action-settings",press:a});o.addAdditionalContent(u)}return o};i.getSelectAllPopover=function(){if(l){return l}l=Promise.all([new Promise(function(e){sap.ui.require(["sap/m/Popover","sap/m/Bar","sap/m/HBox","sap/m/Title","sap/ui/core/library","sap/m/Text"],function(t,a,r,n,i,o){e({Popover:t,Bar:a,HBox:r,Title:n,coreLib:i,Text:o})})}),t.getLibraryResourceBundle("sap.m",true)]).then(function(e){var t=e[0];var a=e[1];var r=t.coreLib.IconColor.Critical,n=t.coreLib.TitleLevel.H2;s=new t.Popover({customHeader:new t.Bar({contentMiddle:[new t.HBox({items:[new t.coreLib.Icon({src:"sap-icon://message-warning",color:r}).addStyleClass("sapUiTinyMarginEnd"),new t.Title({text:a.getText("TABLE_SELECT_LIMIT_TITLE"),level:n})],renderType:"Bare",justifyContent:"Center",alignItems:"Center"})]}),content:[new t.Text]}).addStyleClass("sapUiContentPadding");return{oSelectAllNotificationPopover:s,oResourceBundle:a}});return l};i.showSelectionLimitPopover=function(e,t){i.getSelectAllPopover().then(function(a){var r=a.oSelectAllNotificationPopover;var n=a.oResourceBundle;var i=n.getText("TABLE_SELECT_LIMIT",[e]);r.getContent()[0].setText(i);if(t){r.openBy(t)}})};i.hideSelectionLimitPopover=function(){if(s&&s.isOpen()){s.close()}};return i});
//# sourceMappingURL=Util.js.map