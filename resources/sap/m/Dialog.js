/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/AnimationMode","sap/ui/core/ControlBehavior","sap/base/i18n/Localization","sap/ui/core/Lib","./Bar","./InstanceManager","./AssociativeOverflowToolbar","./ToolbarSpacer","./Title","./library","sap/m/Image","sap/m/dialogUtils/PreventKeyboardEvents","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/IconPool","sap/ui/core/Popup","sap/ui/core/delegate/ScrollEnablement","sap/ui/core/RenderManager","sap/ui/core/InvisibleText","sap/ui/core/theming/Parameters","sap/ui/core/util/ResponsivePaddingsEnablement","sap/ui/Device","sap/ui/core/library","sap/ui/events/KeyCodes","./TitlePropagationSupport","./DialogRenderer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Configuration","sap/ui/dom/units/Rem","sap/ui/dom/jquery/Focusable"],function(e,t,i,o,s,r,n,a,l,h,u,p,g,c,d,f,_,y,b,m,S,v,R,D,T,A,I,jQuery,B,C){"use strict";var O=R.OpenState;var P=h.ButtonType;var M=h.DialogType;var w=h.DialogRoleType;var E=R.ValueState;var z=R.TitleLevel;var F=h.TitleAlignment;var H=t.getAnimationMode();var x=H!==e.none&&H!==e.minimal;var L=x?300:10;var W=17;var V=C.toPx(1);var $=5;var N=3;var k=g.extend("sap.m.Dialog",{metadata:{interfaces:["sap.ui.core.PopupInterface"],library:"sap.m",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},title:{type:"string",group:"Appearance",defaultValue:null},showHeader:{type:"boolean",group:"Appearance",defaultValue:true},type:{type:"sap.m.DialogType",group:"Appearance",defaultValue:M.Standard},state:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:E.None},stretchOnPhone:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},stretch:{type:"boolean",group:"Appearance",defaultValue:false},contentWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},contentHeight:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},horizontalScrolling:{type:"boolean",group:"Behavior",defaultValue:true},verticalScrolling:{type:"boolean",group:"Behavior",defaultValue:true},resizable:{type:"boolean",group:"Behavior",defaultValue:false},draggable:{type:"boolean",group:"Behavior",defaultValue:false},escapeHandler:{type:"function",group:"Behavior",defaultValue:null},role:{type:"sap.m.DialogRoleType",group:"Data",defaultValue:w.Dialog,visibility:"hidden"},closeOnNavigation:{type:"boolean",group:"Behavior",defaultValue:true},titleAlignment:{type:"sap.m.TitleAlignment",group:"Misc",defaultValue:F.Auto}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},subHeader:{type:"sap.m.IBar",multiple:false},customHeader:{type:"sap.m.IBar",multiple:false},beginButton:{type:"sap.m.Button",multiple:false},endButton:{type:"sap.m.Button",multiple:false},buttons:{type:"sap.m.Button",multiple:true,singularName:"button"},footer:{type:"sap.m.Toolbar",multiple:false},_header:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_icon:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_toolbar:{type:"sap.m.OverflowToolbar",multiple:false,visibility:"hidden"},_valueState:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}},associations:{leftButton:{type:"sap.m.Button",multiple:false,deprecated:true},rightButton:{type:"sap.m.Button",multiple:false,deprecated:true},initialFocus:{type:"sap.ui.core.Control",multiple:false},ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{beforeOpen:{allowPreventDefault:true},afterOpen:{},beforeClose:{allowPreventDefault:true,parameters:{origin:{type:"sap.m.Button"}}},afterClose:{parameters:{origin:{type:"sap.m.Button"}}}},designtime:"sap/m/designtime/Dialog.designtime"},renderer:A});S.call(k.prototype,{header:{suffix:"header"},subHeader:{selector:".sapMDialogSubHeader .sapMIBar"},content:{selector:".sapMDialogScrollCont"},footer:{selector:".sapMDialogFooter .sapMIBar"}});T.call(k.prototype,"content",function(){return this._headerTitle?this._headerTitle.getId():false});k._bPaddingByDefault=B.getCompatibilityVersion("sapMDialogWithPadding").compareTo("1.16")<0;k._initIcons=function(){if(k._mIcons){return}k._mIcons={};k._mIcons[E.Success]=d.getIconURI("sys-enter-2");k._mIcons[E.Warning]=d.getIconURI("alert");k._mIcons[E.Error]=d.getIconURI("error");k._mIcons[E.Information]=d.getIconURI("information")};k._getHeaderToolbarAriaLabelledByText=function(){if(!k._oHeaderToolbarInvisibleText){k._oHeaderToolbarInvisibleText=new b("__headerActionsToolbar-invisibleText",{text:o.getResourceBundleFor("sap.m").getText("ARIA_LABEL_TOOLBAR_HEADER_ACTIONS")}).toStatic()}return k._oHeaderToolbarInvisibleText};k._getFooterToolbarAriaLabelledByText=function(){if(!k._oFooterToolbarInvisibleText){k._oFooterToolbarInvisibleText=new b("__footerActionsToolbar-invisibleText",{text:o.getResourceBundleFor("sap.m").getText("ARIA_LABEL_TOOLBAR_FOOTER_ACTIONS")}).toStatic()}return k._oFooterToolbarInvisibleText};k.prototype.init=function(){var e=this;this._oManuallySetSize=null;this._oManuallySetPosition=null;this._bRTL=i.getRTL();this._scrollContentList=["sap.m.NavContainer","sap.m.Page","sap.m.ScrollContainer","sap.m.SplitContainer","sap.m.MultiInput","sap.m.SimpleFixFlex"];this.oPopup=new f;this.oPopup.setShadow(true);this.oPopup.setNavigationMode("SCOPE");this.oPopup.setModal(true);this.oPopup.setAnimations(jQuery.proxy(this._openAnimation,this),jQuery.proxy(this._closeAnimation,this));this.oPopup._applyPosition=function(t,i){e._setDimensions();e._adjustScrollingPane();if(e._oManuallySetPosition){t.at={left:e._oManuallySetPosition.x,top:e._oManuallySetPosition.y}}else{t.at=e._calcPosition()}e._deregisterResizeObserver();f.prototype._applyPosition.call(this,t);e._registerResizeObserver()};if(k._bPaddingByDefault){this.addStyleClass("sapUiPopupWithPadding")}this._initTitlePropagationSupport();this._initResponsivePaddingsEnablement();this._oAriaDescribedbyText=new b({id:this.getId()+"-ariaDescribedbyText"})};k.prototype.onBeforeRendering=function(){this._loadVerticalMargin();var e=this._getAnyHeader();if(!k._bPaddingByDefault&&this.hasStyleClass("sapUiPopupWithPadding")){I.warning("Usage of CSS class 'sapUiPopupWithPadding' is deprecated. Use 'sapUiContentPadding' instead",null,"sap.m.Dialog")}if(this._hasSingleScrollableContent()){this.setVerticalScrolling(false);this.setHorizontalScrolling(false);I.info("VerticalScrolling and horizontalScrolling in sap.m.Dialog with ID "+this.getId()+" has been disabled because there's scrollable content inside")}else if(!this._oScroller){this._oScroller=new _(this,this.getId()+"-scroll",{horizontal:this.getHorizontalScrolling(),vertical:this.getVerticalScrolling()})}if(this._oScroller){this._oScroller.setVertical(this.getVerticalScrolling());this._oScroller.setHorizontal(this.getHorizontalScrolling())}this._createToolbarButtons();if(t.isAccessibilityEnabled()&&this.getState()!=E.None){if(!this._oValueState){this._oValueState=new b;this.setAggregation("_valueState",this._oValueState);this.addAriaLabelledBy(this._oValueState.getId())}this._oValueState.setText(this.getValueStateString(this.getState()))}if(e&&e.setTitleAlignment){e.setTitleAlignment(this.getTitleAlignment())}if(e&&this._getTitles(e).length===0){e._setRootAccessibilityRole("heading");e._setRootAriaLevel("2")}this._oAriaDescribedbyText.setText(this._getAriaDescribedByText())};k.prototype.onAfterRendering=function(){this._$scrollPane=this.$("scroll");this._$content=this.$("cont");this._$dialog=this.$();if(!this.isOpen()&&!this._bDuringOpenCalled){this._duringOpen()}if(this.isOpen()){this._setInitialFocus()}};k.prototype.exit=function(){r.removeDialogInstance(this);this._deregisterResizeObserver();this._deregisterWithinAreaResizeObserver();if(this.oPopup){this.oPopup.detachOpened(this._handleOpened,this);this.oPopup.detachClosed(this._handleClosed,this);this.oPopup.destroy();this.oPopup=null}if(this._oScroller){this._oScroller.destroy();this._oScroller=null}if(this._header){this._header.destroy();this._header=null}if(this._headerTitle){this._headerTitle.destroy();this._headerTitle=null}if(this._iconImage){this._iconImage.destroy();this._iconImage=null}if(this._toolbarSpacer){this._toolbarSpacer.destroy();this._toolbarSpacer=null}if(this._oAriaDescribedbyText){this._oAriaDescribedbyText.destroy();this._oAriaDescribedbyText=null}p.restore(this.getDomRef());this._bDuringOpenCalled=false};k.prototype.open=function(){this._bDuringOpenCalled=false;var e=this.oPopup;var t=e.getOpenState();switch(t){case O.OPEN:case O.OPENING:return this;case O.CLOSING:this._bOpenAfterClose=true;break;default:}if(!this.fireBeforeOpen()){return this}this._oCloseTrigger=null;e.attachOpened(this._handleOpened,this);this._iLastWidthAndHeightWithScroll=null;e.setContent(this);e.open();this._registerWithinAreaResizeObserver();r.addDialogInstance(this);return this};k.prototype.close=function(){this._bOpenAfterClose=false;var e=this.oPopup;var t=this.oPopup.getOpenState();if(t===O.CLOSED||t===O.CLOSING){return this}if(!this.fireBeforeClose({origin:this._oCloseTrigger})){return this}this._deregisterWithinAreaResizeObserver();h.closeKeyboard();e.attachClosed(this._handleClosed,this);this._bDisableRepositioning=false;this._oManuallySetPosition=null;this._oManuallySetSize=null;e.close();this._deregisterResizeObserver();return this};k.prototype.isOpen=function(){return!!this.oPopup&&this.oPopup.isOpen()};k.prototype.setIcon=function(e){this._bHasCustomIcon=true;return this.setProperty("icon",e)};k.prototype.setState=function(e){var t;this.setProperty("state",e);if(this._bHasCustomIcon){return this}if(e===E.None){t=""}else{k._initIcons();t=k._mIcons[e]}this.setProperty("icon",t);return this};k.prototype._handleOpened=function(){this.oPopup.detachOpened(this._handleOpened,this);this._setInitialFocus();this.fireAfterOpen();p.restore(this.getDomRef())};k.prototype._handleClosed=function(){p.restore(this.getDomRef());if(!this.oPopup){return}this.oPopup.detachClosed(this._handleClosed,this);if(this.getDomRef()){y.preserveContent(this.getDomRef());this.$().remove()}r.removeDialogInstance(this);this.fireAfterClose({origin:this._oCloseTrigger});this._bDuringOpenCalled=false;if(this._bOpenAfterClose){this._bOpenAfterClose=false;this.open()}};k.prototype._duringOpen=function(){p.preventOnce(this.getDomRef());if(v.system.desktop){this.oPopup.setInitialFocusId(this._determineInitialFocusId())}else{this.oPopup.setInitialFocusId(this.getId())}this._bDuringOpenCalled=true};k.prototype.onfocusin=function(e){var t=e.target;if(t.id===this.getId()+"-firstfe"){var i=this._getAnyFooter()?.$().lastFocusableDomRef()||this.$("cont").lastFocusableDomRef()||this.getSubHeader()&&this.getSubHeader().$().firstFocusableDomRef()||this._getAnyHeader()&&this._getAnyHeader().$().lastFocusableDomRef();if(i){i.focus()}}else if(t.id===this.getId()+"-lastfe"){var o=this._getFocusableHeader()||this._getAnyHeader()&&this._getAnyHeader().$().firstFocusableDomRef()||this.getSubHeader()&&this.getSubHeader().$().firstFocusableDomRef()||this.$("cont").firstFocusableDomRef()||this.$("footer").firstFocusableDomRef();if(o){o.focus()}}};k.prototype._getPromiseWrapper=function(){var e=this;return{reject:function(){e.currentPromise.reject()},resolve:function(){e.currentPromise.resolve()}}};k.prototype.onsapescape=function(e){var t=this.getEscapeHandler(),i={},o=this;if(this._isSpaceOrEnterPressed){return}if(e.originalEvent&&e.originalEvent._sapui_handledByControl){return}this._oCloseTrigger=null;if(typeof t==="function"){new Promise(function(e,s){i.resolve=e;i.reject=s;o.currentPromise=i;t(o._getPromiseWrapper())}).then(function(e){o.close()}).catch(function(){I.info("Disallow dialog closing")})}else{this.close()}e.stopPropagation()};k.prototype.onkeyup=function(e){if(this._isSpaceOrEnter(e)){this._isSpaceOrEnterPressed=false}};k.prototype.onkeydown=function(e){if(this._isSpaceOrEnter(e)){this._isSpaceOrEnterPressed=true}var t=e.which||e.keyCode;if((e.ctrlKey||e.metaKey)&&t===D.ENTER){var i=this._findFirstPositiveButton();if(i){i.firePress();e.stopPropagation();e.preventDefault();return}}this._handleKeyboardDragResize(e)};k.prototype._findFirstPositiveButton=function(){var e;if(this.getFooter()){e=this.getFooter().getContent().filter(function(e){return e.isA("sap.m.Button")})}else{e=this.getButtons()}for(var t=0;t<e.length;t++){var i=e[t];if(i.getType()===P.Accept||i.getType()===P.Emphasized){return i}}};k.prototype._handleKeyboardDragResize=function(e){if(e.target!==this._getFocusableHeader()||[D.ARROW_LEFT,D.ARROW_RIGHT,D.ARROW_UP,D.ARROW_DOWN].indexOf(e.keyCode)===-1){return}if(!this.getResizable()&&e.shiftKey||!this.getDraggable()&&!e.shiftKey){return}var t=this._$dialog,i=this.getDomRef().getBoundingClientRect(),o={left:i.x,top:i.y},s=this._getAreaDimensions(),r=t.width(),n=t.height(),a=t.outerHeight(true),l=e.shiftKey,h,u;this._bDisableRepositioning=true;if(l){this._oManuallySetSize=true;this.$("cont").height("").width("")}switch(e.keyCode){case D.ARROW_LEFT:if(l){r-=V}else{o.left-=V}break;case D.ARROW_RIGHT:if(l){r+=V}else{o.left+=V}break;case D.ARROW_UP:if(l){n-=V}else{o.top-=V}break;case D.ARROW_DOWN:if(l){n+=V}else{o.top+=V}break}if(l){u=s.bottom-o.top-a+n;if(e.keyCode===D.ARROW_DOWN){u-=V}h={width:Math.min(r,s.right-o.left),height:Math.min(n,u)}}else{h={left:Math.min(Math.max(s.left,o.left),s.right-r),top:Math.min(Math.max(s.top,o.top),s.bottom-a)}}t.css(h)};k.prototype._isSpaceOrEnter=function(e){var t=e.which||e.keyCode;return t==D.SPACE||t==D.ENTER};k.prototype._openAnimation=function(e,t,i){e.addClass("sapMDialogOpen");setTimeout(i,L)};k.prototype._closeAnimation=function(e,t,i){e.removeClass("sapMDialogOpen");setTimeout(i,L)};k.prototype._setDimensions=function(){var e=this.$(),t=this.getStretch(),i=this.getType()===M.Message,o={};if(!t){if(!this._oManuallySetSize){o.width=this.getContentWidth()||undefined;o.height=this.getContentHeight()||undefined}else{o.width=this._oManuallySetSize.width;o.height=this._oManuallySetSize.height}}if(o.width=="auto"){o.width=undefined}if(o.height=="auto"){o.height=undefined}if(t&&!i){this.$().addClass("sapMDialogStretched")}if(this.getStretchOnPhone()&&v.system.phone){this.$().addClass("sapMDialogStretched")}e.css(o);e.css(this._calcMaxSizes());if(!this._oManuallySetSize&&!this._bDisableRepositioning){e.css(this._calcPosition())}if(window.navigator.userAgent.toLowerCase().indexOf("chrome")!==-1&&this.getStretch()){e.find("> footer").css({bottom:"0.001px"})}};k.prototype._adjustScrollingPane=function(){if(this._oScroller){this._oScroller.refresh()}};k.prototype._onResize=function(){if(!this.getDomRef()){return}var e=this.$(),t=this.$("cont"),i=this.getContentWidth(),o=this._calcMaxSizes().maxWidth,s=this.getSubHeader()?.getDomRef(),r=(this.getCustomHeader()||this._header)?.getDomRef();if(r||s){const e=r?r.getBoundingClientRect().height:0;const t=s?s.getBoundingClientRect().height:0;this.getDomRef().style.paddingTop=e+t+"px"}if(this._oManuallySetSize){t.css({width:"auto"});return}if(v.system.desktop&&!v.browser.chrome){var n=t.width()+"x"+t.height(),a=e.css("min-width")!==e.css("width");if(n!==this._iLastWidthAndHeightWithScroll&&a){if(this._hasVerticalScrollbar()&&(!i||i=="auto")&&!this.getStretch()&&t.width()<o){e.addClass("sapMDialogVerticalScrollIncluded");t.css({"padding-right":W});this._iLastWidthAndHeightWithScroll=n}else{e.removeClass("sapMDialogVerticalScrollIncluded");t.css({"padding-right":""});this._iLastWidthAndHeightWithScroll=null}}else if(!this._hasVerticalScrollbar()||!a){e.removeClass("sapMDialogVerticalScrollIncluded");t.css({"padding-right":""});this._iLastWidthAndHeightWithScroll=null}}if(!this._oManuallySetSize&&!this._bDisableRepositioning){this._positionDialog()}};k.prototype._hasVerticalScrollbar=function(){var e=this.$("cont");return e[0].clientHeight<e[0].scrollHeight};k.prototype._positionDialog=function(){var e=this.$();e.css(this._calcMaxSizes());e.css(this._calcPosition())};k.prototype._calcPosition=function(){var e=this._getAreaDimensions(),t=this.$(),i,o,s;if(v.system.phone&&this.getStretch()){i=0;o=0}else if(this.getStretch()){i=this._percentOfSize(e.width,$);o=this._percentOfSize(e.height,N)}else{i=(e.width-t.outerWidth())/2;o=(e.height-t.outerHeight())/2}s={top:Math.round(e.top+o)};if(this._bRTL){s.right=Math.round(window.innerWidth-e.right+i)}else{s.left=Math.round(e.left+i)}return s};k.prototype._calcMaxSizes=function(){var e=this._getAreaDimensions(),t=this.$(),i=t.find(".sapMDialogTitleGroup").height()||0,o=t.find(".sapMDialogSubHeader").height()||0,s=t.find("> footer").height()||0,r=i+o+s,n,a;if(v.system.phone&&this.getStretch()){a=e.width;n=e.height-r}else{a=this._percentOfSize(e.width,100-2*$);n=this._percentOfSize(e.height,100-2*N)-r}return{maxWidth:Math.floor(a),maxHeight:Math.floor(n)}};k.prototype._getAreaDimensions=function(){var e=f.getWithinAreaDomRef(),t;if(e===window){t={left:0,top:0,width:e.innerWidth,height:e.innerHeight}}else{var i=e.getBoundingClientRect(),o=jQuery(e);t={left:i.left+parseFloat(o.css("border-left-width")),top:i.top+parseFloat(o.css("border-top-width")),width:e.clientWidth,height:e.clientHeight}}t.right=t.left+t.width;t.bottom=t.top+t.height;return t};k.prototype._percentOfSize=function(e,t){return Math.round(e*t/100)};k.prototype._createHeader=function(){if(!this._header){this._header=new s(this.getId()+"-header",{titleAlignment:this.getTitleAlignment(),ariaLabelledBy:k._getHeaderToolbarAriaLabelledByText()});this.setAggregation("_header",this._header)}};k.prototype._applyTitleToHeader=function(){var e=this.getProperty("title");if(this._headerTitle){this._headerTitle.setText(e)}else{this._headerTitle=new l(this.getId()+"-title",{text:e,level:z.H1}).addStyleClass("sapMDialogTitle");this._header.addContentMiddle(this._headerTitle)}};k.prototype._hasSingleScrollableContent=function(){var e=this.getContent();while(e.length===1&&e[0]instanceof g&&e[0].isA("sap.ui.core.mvc.View")){e=e[0].getContent()}if(e.length===1&&e[0]instanceof g&&e[0].isA(this._scrollContentList)){return true}return false};k.prototype._getFocusDomRef=function(e){var t=this.getInitialFocus();if(t&&!e){return document.getElementById(t)}return this._getFocusableHeader()||this._getFirstFocusableContentSubHeader()||this._getFirstFocusableContentElement()||this._getFirstVisibleButtonDomRef()||this.getDomRef()};k.prototype._getFirstVisibleButtonDomRef=function(){var e=this.getBeginButton(),t=this.getEndButton(),i=this.getButtons(),o;if(e&&e.getVisible()){o=e.getDomRef()}else if(t&&t.getVisible()){o=t.getDomRef()}else if(i&&i.length>0){for(var s=0;s<i.length;s++){if(i[s].getVisible()){o=i[s].getDomRef();break}}}return o};k.prototype._getFocusableHeader=function(){if(!this._isDraggableOrResizable()){return null}return this.$().find("header .sapMDialogTitleGroup")[0]};k.prototype._getFirstFocusableContentSubHeader=function(){var e=this.$().find(".sapMDialogSubHeader");return e.firstFocusableDomRef()};k.prototype._getFirstFocusableContentElement=function(){var e=this.$("cont");return e.firstFocusableDomRef()};k.prototype._setInitialFocus=function(){const e=this._determineInitialFocus();if(e.initialFocusProperty!==this.getInitialFocus()){this.setAssociation("initialFocus",e.initialFocusProperty,true)}if(e.realTarget){e.realTarget.focus()}};k.prototype._determineInitialFocus=function(){let e=this._getFocusDomRef();let t;let i;let o=this.getInitialFocus();if(e&&e.id){t=c.getElementById(e.id)}if(t){if(t.getVisible&&!t.getVisible()){return{realTarget:this,initialFocusProperty:o}}e=t.getFocusDomRef()}if(!e){o="";e=this._getFocusDomRef(true)}if(!o){o=e?e.id:this.getId()}if(v.system.desktop||e&&!/input|textarea|select/i.test(e.tagName)){i=e}else{i=this}return{realTarget:i,initialFocusProperty:o}};k.prototype._determineInitialFocusId=function(){const e=this._determineInitialFocus();const t=e.realTarget;if(t instanceof g){return t.getId()}return t?.id};k.prototype.getScrollDelegate=function(){return this._oScroller};k.prototype._isToolbarEmpty=function(){var e=this._oToolbar.getContent().filter(function(e){return e.getMetadata().getName()!=="sap.m.ToolbarSpacer"});return e.length===0};k.prototype._getAnyHeader=function(){var e=this.getCustomHeader();if(e){return e}else{var t=this.getShowHeader();if(!t){return null}this._createHeader();this._applyTitleToHeader();this._applyIconToHeader();return this._header}};k.prototype._getAnyFooter=function(){return this.getFooter()||this._getToolbar()};k.prototype._deregisterWithinAreaResizeObserver=function(){var e=f.getWithinAreaDomRef();if(e===window){v.resize.detachHandler(this._onResize,this)}else if(this._oWithinAreaResizeObserver){this._oWithinAreaResizeObserver.disconnect();this._oWithinAreaResizeObserver=null}};k.prototype._registerWithinAreaResizeObserver=function(){var e=f.getWithinAreaDomRef();if(e===window){v.resize.attachHandler(this._onResize,this)}else{this._oWithinAreaResizeObserver=new ResizeObserver(()=>{window.requestAnimationFrame(()=>{this._onResize()})});this._oWithinAreaResizeObserver.observe(e)}this._onResize()};k.prototype._deregisterResizeObserver=function(){if(this._oResizeObserver){this._oResizeObserver.disconnect();this._oResizeObserver=null}};k.prototype._registerResizeObserver=function(){if(!this._oResizeObserver){this._oResizeObserver=new ResizeObserver(()=>{window.requestAnimationFrame(()=>{this._onResize()})});this._oResizeObserver.observe(this.getDomRef("scrollCont"));if(this.getDomRef().getElementsByClassName("sapMDialogTitleGroup")&&this.getDomRef().getElementsByClassName("sapMDialogTitleGroup").length>0){this._oResizeObserver.observe(this.getDomRef().getElementsByClassName("sapMDialogTitleGroup")[0])}}this._onResize()};k.prototype._attachHandler=function(e){var t=this;if(!this._oButtonDelegate){this._oButtonDelegate={ontap:function(){t._oCloseTrigger=this},onkeyup:function(){t._oCloseTrigger=this},onkeydown:function(){t._oCloseTrigger=this}}}if(e){e.addDelegate(this._oButtonDelegate,true,e)}};k.prototype._createToolbarButtons=function(){if(this.getFooter()){return}var e=this._getToolbar();var t=this.getButtons();var i=this.getBeginButton();var o=this.getEndButton(),s=this,r=[i,o];r.forEach(function(e){if(e&&s._oButtonDelegate){e.removeDelegate(s._oButtonDelegate)}});e.removeAllContent();if(!("_toolbarSpacer"in this)){this._toolbarSpacer=new a}e.addContent(this._toolbarSpacer);r.forEach(function(e){s._attachHandler(e)});if(t&&t.length){t.forEach(function(t){e.addContent(t)})}else{if(i){e.addContent(i)}if(o){e.addContent(o)}}};k.prototype._getToolbar=function(){if(!this._oToolbar){this._oToolbar=new n(this.getId()+"-footer",{ariaLabelledBy:k._getFooterToolbarAriaLabelledByText()}).addStyleClass("sapMTBNoBorders");this._oToolbar.addDelegate({onAfterRendering:function(){if(this.getType()===M.Message){this.$("footer").removeClass("sapContrast sapContrastPlus")}}},false,this);this.setAggregation("_toolbar",this._oToolbar)}return this._oToolbar};k.prototype.getValueStateString=function(e){var t=o.getResourceBundleFor("sap.m");switch(e){case E.Success:return t.getText("LIST_ITEM_STATE_SUCCESS");case E.Warning:return t.getText("LIST_ITEM_STATE_WARNING");case E.Error:return t.getText("LIST_ITEM_STATE_ERROR");case E.Information:return t.getText("LIST_ITEM_STATE_INFORMATION");default:return""}};k.prototype._isDraggableOrResizable=function(){return!this.getStretch()&&(this.getDraggable()||this.getResizable())};k.prototype._getAriaDescribedByText=function(){var e=o.getResourceBundleFor("sap.m");if(this.getResizable()&&this.getDraggable()){return e.getText("DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE_RESIZABLE")}if(this.getDraggable()){return e.getText("DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE")}if(this.getResizable()){return e.getText("DIALOG_HEADER_ARIA_DESCRIBEDBY_RESIZABLE")}return""};k.prototype._loadVerticalMargin=function(){N=m.get({name:"_sap_m_Dialog_VerticalMargin",callback:function(e){N=parseFloat(e)}});if(N){N=parseFloat(N)}else{N=3}};k.prototype.setSubHeader=function(e){this.setAggregation("subHeader",e);if(e){e.setVisible=function(t){e.setProperty("visible",t);this.invalidate()}.bind(this)}return this};k.prototype.setLeftButton=function(e){if(typeof e==="string"){e=c.getElementById(e)}this.setBeginButton(e);return this.setAssociation("leftButton",e)};k.prototype.setRightButton=function(e){if(typeof e==="string"){e=c.getElementById(e)}this.setEndButton(e);return this.setAssociation("rightButton",e)};k.prototype.getLeftButton=function(){var e=this.getBeginButton();return e?e.getId():null};k.prototype.getRightButton=function(){var e=this.getEndButton();return e?e.getId():null};k.prototype.setBeginButton=function(e){if(e&&e.isA("sap.m.Button")){e.addStyleClass("sapMDialogBeginButton")}return this.setAggregation("beginButton",e)};k.prototype.setEndButton=function(e){if(e&&e.isA("sap.m.Button")){e.addStyleClass("sapMDialogEndButton")}return this.setAggregation("endButton",e)};k.prototype.getAggregation=function(e,t,i){var o=g.prototype.getAggregation.apply(this,Array.prototype.slice.call(arguments,0,2));if(e==="buttons"&&o&&o.length===0){this.getBeginButton()&&o.push(this.getBeginButton());this.getEndButton()&&o.push(this.getEndButton())}return o};k.prototype.getAriaLabelledBy=function(){var e=this._getAnyHeader(),t=this.getAssociation("ariaLabelledBy",[]).slice();var i=this.getSubHeader();if(i){var o=this._getTitles(i);if(o.length){t=o.map(function(e){return e.getId()}).concat(t)}}if(e){var s=this._getTitles(e);if(s.length){t=s.map(function(e){return e.getId()}).concat(t)}else{t.unshift(e.getId())}}return t};k.prototype._applyIconToHeader=function(){var e=this.getIcon();if(!e){if(this._iconImage){this._iconImage.destroy();this._iconImage=null}return}if(!this._iconImage){this._iconImage=d.createControlByURI({id:this.getId()+"-icon",src:e,useIconTooltip:false},u).addStyleClass("sapMDialogIcon");this._header.insertAggregation("contentMiddle",this._iconImage,0)}this._iconImage.setSrc(e)};k.prototype.setInitialFocus=function(e){return this.setAssociation("initialFocus",e,true)};k.prototype.invalidate=function(e){if(this.isOpen()){g.prototype.invalidate.call(this,e)}};function G(e){var t=jQuery(e);var i=c.closestTo(e);if(t.parents(".sapMDialogSection").length){return false}if(!i||i.isA("sap.m.IBar")){return true}return t.hasClass("sapMDialogTitleGroup")}if(v.system.desktop){k.prototype.ondblclick=function(e){if(G(e.target)){var t=this.$("cont");this._bDisableRepositioning=false;this._oManuallySetPosition=null;this._oManuallySetSize=null;this.oPopup&&this.oPopup._applyPosition(this.oPopup._oLastPosition,true);t.css({height:"100%"})}};k.prototype.onmousedown=function(e){if(e.which===3){return}if(!this._isDraggableOrResizable()){return}var t;var i=this;var o=jQuery(document);var s=jQuery(e.target);var r=e.target.closest(".sapMDialogResizeHandle")&&this.getResizable();var n=function(e){t=t?clearTimeout(t):setTimeout(function(){e()},0)};var a=this._getAreaDimensions();var l=this.getDomRef().getBoundingClientRect();var h={x:e.clientX,y:e.clientY,width:i._$dialog.width(),height:i._$dialog.height(),outerHeight:i._$dialog.outerHeight(),position:{x:l.x,y:l.y}};var u;function p(){var e=i.$(),t=i.$("cont"),s,n;i.removeStyleClass("sapMDialogDisableSelection");o.off("mouseup",p);o.off("mousemove",u);if(r){s=parseInt(e.height());n=parseInt(e.css("border-top-width"))+parseInt(e.css("border-bottom-width"));t.height(s+n)}}if(G(e.target)&&this.getDraggable()||r){i._bDisableRepositioning=true}if(G(e.target)&&this.getDraggable()){u=function(t){t.preventDefault();if(t.buttons===0){p();return}n(function(){i._bDisableRepositioning=true;i._oManuallySetPosition={x:Math.max(a.left,Math.min(t.clientX-e.clientX+h.position.x,a.right-h.width)),y:Math.max(a.top,Math.min(t.clientY-e.clientY+h.position.y,a.bottom-h.outerHeight))};i._$dialog.css({top:i._oManuallySetPosition.y,left:i._oManuallySetPosition.x,right:i._bRTL?"":undefined})})}}else if(r){var g={};var c=parseInt(i._$dialog.css("min-width"));var d=h.x+h.width-c;var f=s.width()-e.offsetX;var _=s.height()-e.offsetY;u=function(e){n(function(){i._bDisableRepositioning=true;i.$("cont").height("").width("");if(e.clientY+_>a.bottom){e.clientY=a.bottom-_}if(e.clientX+f>a.right){e.clientX=a.right-f}i._oManuallySetSize={width:h.width+e.clientX-h.x,height:h.height+e.clientY-h.y};if(i._bRTL){g.left=Math.min(Math.max(e.clientX,0),d);i._oManuallySetSize.width=h.width+h.x-Math.max(e.clientX,0)}g.width=i._oManuallySetSize.width;g.height=i._oManuallySetSize.height;i._$dialog.css(g)})}}else{return}this.addStyleClass("sapMDialogDisableSelection");o.on("mousemove",u);o.on("mouseup",p);e.stopPropagation()}}k.prototype._applyContextualSettings=function(){g.prototype._applyContextualSettings.call(this)};k.prototype._getTitles=function(e){return e.findAggregatedObjects(true,function(e){return e.isA("sap.m.Title")})};return k});
//# sourceMappingURL=Dialog.js.map