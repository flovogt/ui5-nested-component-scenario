sap.ui.define(["sap/ui/core/util/MockServer","sap/ui/model/json/JSONModel","sap/base/Log"],(e,t,r)=>{"use strict";let a;const o="my/lib/sample/products/",s=`${o}localService/mockdata`,i={init(i){const n=i||{};return new Promise((i,u)=>{const c=sap.ui.require.toUrl(`${o}manifest.json`),p=new t(c);p.attachRequestCompleted(()=>{const t=new URLSearchParams(window.location.search),u=sap.ui.require.toUrl(s),c=p.getProperty("/sap.app/dataSources/mainService"),l=sap.ui.require.toUrl(o+c.settings.localUri),d=/.*\/$/u.test(c.uri)?c.uri:`${c.uri}/`;if(!a){a=new e({rootUri:d})}else{a.stop()}e.config({autoRespond:true,autoRespondAfter:n.delay||t.get("serverDelay")||500});a.simulate(l,{sMockdataBaseUrl:u,bGenerateMissingMockData:true});const m=a.getRequests(),f=(e,t,r)=>{r.response=r=>{r.respond(e,{"Content-Type":"text/plain;charset=utf-8"},t)}};if(n.metadataError||t.get("metadataError")){m.forEach(e=>{if(e.path.toString().indexOf("$metadata")>-1){f(500,"metadata Error",e)}})}const g=n.errorType||t.get("errorType"),h=g==="badRequest"?400:500;if(g){m.forEach(e=>{f(h,g,e)})}a.setRequests(m);a.start();r.info("Running the app with mock data");i()});p.attachRequestFailed(()=>{const e="Failed to load application manifest";r.error(e);u(new Error(e))})})},getMockServer(){return a}};return i});
//# sourceMappingURL=mockserver.js.map