{"version":3,"file":"ThemeManager.js","names":["sap","ui","define","Global","Element","Configuration","Device","EventProvider","Log","assert","each","LoaderExtensions","ActivityDetection","includeStylesheet","ThemeHelper","oThemeManager","maxThemeCheckCycles","mAllLoadedLibraries","CUSTOMCSSCHECK","ThemeManager","extend","constructor","apply","this","arguments","_iCount","_CUSTOMID","_customCSSAdded","_themeCheckedForCustom","_sFallbackTheme","_mThemeFallback","setupThemes","themeLoaded","metadata","events","ThemeChanged","checkThemeChanged","reset","delayedCheckTheme","_sThemeCheckId","fireThemeChanged","prototype","clearTimeout","checkTheme","sThemeName","getTheme","sPath","_getThemePath","bIsStandardTheme","indexOf","res","aFailedLibs","checkLib","lib","sStyleId","currentRes","checkAndRemoveStyle","prefix","id","document","getElementById","checkCustom","sCustomCssPath","sLibCssQueryParams","getLibraryCssQueryParams","debug","oCustomCssLink","querySelector","remove","oStyle","getAttribute","sheet","hasSheetCssRules","push","length","sLib","oThemeMetaData","getMetadata","Extends","forEach","warning","updateThemeUrl","cssFile","window","style","getComputedStyle","content","getPropertyValue","browser","safari","html","documentElement","classList","add","substring","e","error","aRules","safeAccessSheetCssRules","i","test","selectorText","bFirst","bEmergencyExit","iDelay","setTimeout","fnAddFoucmarker","sLinkId","oLink","dataset","sapUiFoucmarker","_includeLibraryThemeAndEnsureThemeRoot","oLibThemingInfo","sLibName","name","_ensureThemeRoot","getValue","includeLibraryTheme","variant","sVariant","vQueryOrLibInfo","undefined","sQuery","sCssVars","sRtl","getRTL","sLibFileName","sLibId","sOldCssUri","href","sCssBasePath","URL","sTheme","baseURI","toString","sCssPathAndName","sCssVariablesPathAndName","info","Parameters","require","_addLibraryTheme","toUrl","replace","_mThemeRoots","path","registerResourcePath","setThemeRoot","aLibraryNames","sThemeBaseUrl","bForceUpdate","Array","isArray","slice","_updateThemeUrls","bSuppressFOUC","oQueryResult","querySelectorAll","call","oHTMLElement","iQueryIndex","search","sStandardLibFilePrefix","sRTL","sHref","pos","mLinkId","exec","lastIndexOf","applyTheme","bForce","normalizeTheme","sCurrentTheme","setTheme","oLibInfo","version","versioninfo","mThemeRoots","themeName","themeRoot","notifyContentDensityChanged","oParameters","ThemeParameters","_reset","theme","sEventId","oEvent","jQuery","Event","registry","oElement","_handleEvent","refresh","fireEvent"],"sources":["ThemeManager-dbg.js"],"mappings":"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"}