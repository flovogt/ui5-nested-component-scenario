/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/CalendarDate","sap/ui/unified/CalendarLegendRenderer","sap/ui/unified/library","sap/base/Log"],function(e,t,a,n,r){"use strict";var o=n.CalendarDayType;var s={apiVersion:2};s.render=function(e,t){var a=t._getStartDate();var n=t.getTooltip_AsString();var r=t.getId();var o={value:r+"-Descr",append:true};e.openStart("div",t);e.class("sapUiCalMonthsRow");e.class("sapUiCalRow");if(n){e.attr("title",n)}e.accessibilityState(t,{role:"grid",readonly:"true",multiselectable:!t.getSingleSelection()||t.getIntervalSelection(),labelledby:o});e.openEnd();e.openStart("span",r+"-Descr");e.style("display","none");e.openEnd();e.text(t._rb.getText("CALENDAR_DIALOG"));e.close("span");if(t.getIntervalSelection()){e.openStart("span",r+"-Start");e.style("display","none");e.openEnd();e.text(t._rb.getText("CALENDAR_START_MONTH"));e.close("span");e.openStart("span",r+"-End");e.style("display","none");e.openEnd();e.text(t._rb.getText("CALENDAR_END_MONTH"));e.close("span")}this.renderRow(e,t,a);e.close("div")};s.renderRow=function(e,t,a){var n=t.getId();this.renderHeader(e,t,a);e.openStart("div",n+"-months");e.class("sapUiCalItems");e.attr("role","row");e.openEnd();this.renderMonths(e,t,a);e.close("div")};s.renderHeader=function(t,a,n){e._checkCalendarDate(n);if(a._getShowHeader()){var r=a._getLocaleData();var o=a.getId();t.openStart("div",o+"-Head");t.openEnd();this.renderHeaderLine(t,a,r,n);t.close("div")}};s.renderHeaderLine=function(a,n,r,o){e._checkCalendarDate(o);var s=n.getId();var l=n.getMonths();var d=new t(o);var i="";var c=0;var p=[];var g=0;for(g=0;g<l;g++){c=d.getYear();if(p.length>0&&p[p.length-1].iYear==c){p[p.length-1].iMonths++}else{p.push({iYear:c,iMonths:1})}d.setMonth(d.getMonth()+1)}for(g=0;g<p.length;g++){var h=p[g];i=100/l*h.iMonths+"%";a.openStart("div",s+"-Head"+g);a.class("sapUiCalHeadText");a.style("width",i);a.openEnd();a.text(h.iYear);a.close("div")}};s.renderMonths=function(e,a,n){var r=this.getHelper(a,n);var o=a.getMonths();var s=100/o+"%";var l=new t(n);l.setDate(1);for(var d=0;d<o;d++){this.renderMonth(e,a,l,r,s);l.setMonth(l.getMonth()+1)}};s.getHelper=function(a,n){e._checkCalendarDate(n);var o={};var s=a.getProperty("primaryCalendarType");o.sLocale=a._getLocale();o.oLocaleData=a._getLocaleData();o.oToday=t.fromLocalJSDate(new Date,s);o.sCurrentMonth=a._rb.getText("CALENDAR_CURRENT_MONTH");o.sId=a.getId();o.oFormatLong=a._getFormatLong();if(a._bLongMonth||!a._bNamesLengthChecked){o.aMonthNames=o.oLocaleData.getMonthsStandAlone("wide",s)}else{o.aMonthNames=o.oLocaleData.getMonthsStandAlone("abbreviated",s);o.aMonthNamesWide=o.oLocaleData.getMonthsStandAlone("wide",s)}var l=a.getLegend();if(l){var d=sap.ui.getCore().byId(l);if(d){if(!(d instanceof sap.ui.unified.CalendarLegend)){throw new Error(d+" is not an sap.ui.unified.CalendarLegend. "+a)}o.oLegend=d}else{r.warning("CalendarLegend "+l+" does not exist!",a)}}o.convertTextInfoToSecondaryType=function(e){var t=a._getSecondaryCalendarType(),n=o.oLocaleData.getMonthsStandAlone("abbreviated",t),r=a._oFormatYearInSecType,s=a._getDisplayedSecondaryDates(e.getMonth(),e.getYear()),l,d,i;if(s.start.getMonth()===s.end.getMonth()){l=n[s.start.getMonth()]}else{i=a._getLocaleData().getIntervalPattern();l=i.replace(/\{0\}/,n[s.start.getMonth()]).replace(/\{1\}/,n[s.end.getMonth()])}if(s.start.getYear()===s.end.getYear()){d=r.format(s.start.toUTCJSDate(),true)}else{d=i.replace(/\{0\}/,r.format(s.start.toUTCJSDate(),true)).replace(/\{1\}/,r.format(s.end.toUTCJSDate(),true))}return{sMonthInfo:l,sYearInfo:d}};return o};s.renderMonth=function(t,n,r,s,l){e._checkCalendarDate(r);var d=!!n._getSecondaryCalendarType(),i;if(d){i=s.convertTextInfoToSecondaryType(r)}var c={role:n._getAriaRole(),selected:false,label:"",describedby:""};if(!n._bLongMonth&&n._bNamesLengthChecked){c["label"]=s.aMonthNamesWide[r.getMonth()]}var p=n._oFormatYyyymm.format(r.toUTCJSDate(),true);var g=n._checkDateSelected(r);var h=n._getDateType(r);var f=n._checkMonthEnabled(r);t.openStart("div",s.sId+"-"+p);t.class("sapUiCalItem");if(l){t.style("width",l)}if(e._isSameMonthAndYear(r,s.oToday)){t.class("sapUiCalItemNow");c["label"]=s.sCurrentMonth+" "}if(g>0){t.class("sapUiCalItemSel");c["selected"]=true}if(g==2){t.class("sapUiCalItemSelStart");c["describedby"]=c["describedby"]+" "+s.sId+"-Start"}else if(g==3){t.class("sapUiCalItemSelEnd");c["describedby"]=c["describedby"]+" "+s.sId+"-End"}else if(g==4){t.class("sapUiCalItemSelBetween")}else if(g==5){t.class("sapUiCalItemSelStart");t.class("sapUiCalItemSelEnd");c["describedby"]=c["describedby"]+" "+s.sId+"-Start";c["describedby"]=c["describedby"]+" "+s.sId+"-End"}if(h&&h.type!=o.None){t.class("sapUiCalItem"+h.type);if(h.tooltip){t.attr("title",h.tooltip)}}if(!f){t.class("sapUiCalItemDsbl");c["disabled"]=true}t.attr("tabindex","-1");t.attr("data-sap-month",p);c["label"]=c["label"]+s.oFormatLong.format(r.toUTCJSDate(),true);if(d){c["label"]=c["label"]+", "+i.sMonthInfo+" "+i.sYearInfo}if(h&&h.type!=o.None){a.addCalendarTypeAccInfo(c,h.type,s.oLegend)}t.accessibilityState(null,c);if(d){t.class("sapUiCalItemWithSecondaryType")}t.openEnd();t.openStart("span");t.class("sapUiCalItemText");t.openEnd();t.text(s.aMonthNames[r.getMonth()]);t.close("span");if(d){t.openStart("span");t.class("sapUiCalItemAddText");t.openEnd();t.text(i.sMonthInfo);t.close("span")}t.close("div")};return s},true);
//# sourceMappingURL=MonthsRowRenderer.js.map