/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/unified/calendar/CalendarDate","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/Month","sap/ui/core/IconPool","./PlanningCalendarLegend","sap/ui/core/InvisibleText","sap/ui/core/Core","sap/ui/unified/library","sap/ui/core/date/CalendarUtils","sap/ui/core/Locale","sap/ui/core/Configuration"],function(e,a,t,n,l,i,r,s,o,p,d){"use strict";var c=s.CalendarDayType;var g={apiVersion:2};g.render=function(e,a){var t=a._getCoreLocaleData();var n=a._getDensitySizes();e.openStart("div",a);e.class("sapMSinglePCGrid");e.class("sapMSPCMonthGrid");e.openEnd();this.renderDayNames(e,a,t);e.openStart("div");e.class("sapMSinglePCGridContent");e.openEnd();this.renderCells(e,a,t,n);e.close("div");e.close("div")};g.renderCells=function(e,a,t,n){var l=a._getCells(),i=a._getVerticalLabels(),r=a._getColumns(),s=[],o=[],p,d,c,g,f=[],u,v,S,C;for(S=0;S<a._getRows();S++){v=0;e.openStart("div");e.attr("role","grid");e.class("sapMSPCMonthWeek");e.openEnd();e.openStart("div");e.class("sapMSPCMonthWeekNumber");e.openEnd();e.text(i[S]);e.close("div");for(C=0;C<r;C++){p=S*r+C;d=l[p];c=a._getAppointmetsForADay(d);g=a._getPreviousAppointmetsForADay(d);f.push(g);u=a._getMoreCountPerCell(p);s.push(u);o.push(c);v=Math.max(v,a._aAppsLevelsPerDay[p].length)}e.openStart("div");e.class("sapMSPCMonthDays");e.class("sapMSPCMonthDaysMax"+v);e.attr("role","row");e.openEnd();for(C=0;C<r;C++){p=S*r+C;d=l[p];this.renderDay(e,a,d,t,s[p],p)}e.openStart("div");e.class("sapMSinglePCBlockers");e.class("sapUiCalendarRowVisFilled");e.attr("role","list");e.openEnd();for(C=0;C<r;C++){p=S*r+C;d=l[p];if(C===0){this.renderAppointments(e,a,f[p],C,s[p],n,S)}this.renderAppointments(e,a,o[p],C,s[p],n,S)}e.close("div");e.close("div");e.close("div")}};g.renderDay=function(n,i,s,o,p,d){var c=i._getSpecialDates(),g=t.prototype._getDateTypes.call(i,s),f=i._getDateFormatter(),u=s.isSame(e.fromLocalJSDate(new Date)),v,S;n.openStart("div");n.class("sapMSPCMonthDay");if(u){n.class("sapMSPCMonthDayToday")}n.attr("role","gridcell");if(a._isWeekend(s,o)||!a._isSameMonthAndYear(s,e.fromLocalJSDate(i.getStartDate()))){n.class("nonWorkingTimeframe")}if(c){if(g&&g[0]){v=g[0];n.class("sapUiCalendarSpecialDay"+v.type);S=l.findLegendItemForItem(r.byId(i._sLegendId),v)}}n.attr("sap-ui-date",s.valueOf().toString());n.attr("tabindex",-1);n.attr("aria-labelledby",f.format(s.toLocalJSDate())+"-Descr");n.openEnd();this.renderDndPlaceholder(n,i.getAggregation("_appsPlaceholders")[d]);if(u){n.openStart("div");n.class("sapMSPCMonthNowMarker");n.openEnd()}n.openStart("div");n.class("specialDateIndicator");n.openEnd();n.close("div");n.openStart("div");n.class("sapMSPCMonthDayNumber");n.openEnd();n.text(s.getDate());n.close("div");if(p){n.openStart("div");n.class("sapMSPCMonthLnkMore");n.openEnd();n.renderControl(i._getMoreLink(p,s,d));n.close("div")}n.openStart("span",f.format(s.toLocalJSDate())+"-Descr");n.class("sapUiInvisibleText");n.openEnd();n.text(i._getCellStartInfo(s.toLocalJSDate()));if(i._sLegendId&&S){n.text(S)}n.close("span");if(u){n.close("div")}n.close("div")};g.renderAppointments=function(e,a,t,n,l,i,r){var s=a._getMaxAppointments(),o=l?s-2:s-1;for(var p=0;p<t.length;p++){if(t[p].level<=o){this.renderAppointment(e,a,t[p],n,i,r)}}};g.renderAppointment=function(e,a,t,n,l,s){var o=t.data,p=t.width,d=t.level,g=a._getColumns(),f=o.getTooltip_AsString(),u=o.getType(),v=o.getColor(),S=o.getTitle(),C=o.getText(),D=o.getIcon(),y=o.getId(),b=o.getParent().getEnableAppointmentsDragAndDrop(),h={role:"listitem",labelledby:{value:i.getStaticId("sap.ui.unified","APPOINTMENT"),append:true},selected:null},m=g-n-p,A=r.getConfiguration().getRTL(),M,I=r.getConfiguration().getTheme().indexOf("_hc")?2:1;m=m<0?0:m;if(S){h["labelledby"].value=h["labelledby"].value+" "+y+"-Title"}h["labelledby"].value=h["labelledby"].value+" "+y+"-Descr";if(C){h["labelledby"].value=h["labelledby"].value+" "+y+"-Text"}if(o.getTentative()){h["labelledby"].value=h["labelledby"].value+" "+i.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(o.getSelected()){h["labelledby"].value=h["labelledby"].value+" "+i.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED")}e.openStart("div",o.getId()+"-"+n+"_"+s);e.attr("draggable",b);e.attr("data-sap-ui-draggable",b);e.attr("data-sap-ui-related",o.getId());e.attr("data-sap-level",d);e.attr("data-sap-width",p);e.attr("tabindex",0);if(f){e.attr("title",f)}e.accessibilityState(o,h);e.class("sapMSinglePCAppointmentWrap");e.class("sapUiCalendarRowApps");if(!v&&u!==c.None){e.class("sapUiCalendarApp"+u)}if(v){if(r.getConfiguration().getRTL()){e.style("border-right-color",v)}else{e.style("border-left-color",v)}}e.style(A?"right":"left","calc("+n*100/g+"% + "+I+"px)");e.style(A?"left":"right","calc("+m*100/g+"% + "+I+"px)");e.style("top",d*l.appHeight+l.cellHeaderHeight+"rem");e.openEnd();e.openStart("div");e.class("sapUiCalendarApp");if(o.getSelected()){e.class("sapUiCalendarAppSel")}if(o.getTentative()){e.class("sapUiCalendarAppTent")}if(D){e.class("sapUiCalendarAppWithIcon")}e.openEnd();e.openStart("div");e.class("sapUiCalendarAppCont");if(v){e.style("background-color",o._getCSSColorForBackground(v))}e.openEnd();if(t.hasPrevious<0){M=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];e.icon("sap-icon://arrow-left",M,{title:null,role:"img"})}if(D){M=["sapUiCalendarAppIcon"];var P={};P["id"]=y+"-Icon";P["title"]=null;P["role"]="img";e.icon(D,M,P)}if(S){e.openStart("span",y+"-Title");e.class("sapUiCalendarAppTitle");e.openEnd();e.text(S,true);e.close("span")}if(t.hasNext<0){M=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];e.icon("sap-icon://arrow-right",M,{title:null,role:"img"})}e.openStart("span",y+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(a._getAppointmentAnnouncementInfo(o));e.close("span");e.close("div");e.close("div");e.close("div")};g.renderDayNames=function(t,n,l){var i=n.getFirstDayOfWeek(),s,c=n.getId(),g,f=r.getConfiguration().getCalendarType(),u=l.getDaysStandAlone("abbreviated",f),v=l.getDaysStandAlone("wide",f),S=new Date(n.getStartDate()),C,D;if(i<0||i>6){var y=o.getWeekConfigurationValues(n.getCalendarWeekNumbering(),new p(d.getFormatSettings().getFormatLocale().toString()));if(y){s=y.firstDayOfWeek}else{s=n._getCoreLocaleData().getFirstDayOfWeek()}}else{s=i}S.setDate(S.getDate()-S.getDay()+s);C=e.fromLocalJSDate(S);t.openStart("div",c+"-Names");t.class("sapMSPCMonthDayNames");t.openEnd();for(var b=0;b<7;b++){D=(b+s)%7;g=c+"-WH"+D;t.openStart("div",g);t.class("sapUiCalWH");if(b===0){t.class("sapUiCalFirstWDay")}if(a._isWeekend(C,l)){t.class("sapUiCalItemWeekEnd")}C.setDate(C.getDate()+1);t.accessibilityState(null,{role:"columnheader",label:v[D]});t.openEnd();t.text(u[D%7]);t.close("div")}t.close("div")};g.renderDndPlaceholder=function(e,a){e.openStart("div");e.class("sapMSinglePCOverlay");e.openEnd();e.renderControl(a);e.close("div")};return g},true);
//# sourceMappingURL=SinglePlanningCalendarMonthGridRenderer.js.map